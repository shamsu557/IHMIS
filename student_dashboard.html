<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, proxy-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Student Dashboard</title>
  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="student_dashboard.css">
  <script>
  window.onload = function() {
        // Prevent back button after logout
        if (!window.performance || window.performance.navigation.type === 2) {
            window.location.href = 'studentLogin.html';
        }
    };

    // Check session expiration periodically
    setInterval(function() {
        fetch('/checkSession')
            .then(response => response.json())
            .then(data => {
                if (!data.loggedIn) {
                    alert('Session expired. Please log in again.');
                    window.location.href = 'studentLogin.html';
                }
            });
    }, 30 * 60 * 1000); // Check every 30 minutes

  </script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand ml-5 pl-5" href="#">
        <img src="logo.jpg" alt="CompuTech Nexus Academy Logo" height="30" class="mr-2"> Student Dashboard
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <!-- Courses Registration -->
            <li class="nav-item dropdown">
                <a class="nav-link ml-5" href="#" id="navbarDropdownCourses" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Courses Registration
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownCourses">
                    <a class="dropdown-item" href="#" data-semester="firstSemester">First Semester</a>
                    <a class="dropdown-item" href="#" data-semester="secondSemester">Second Semester</a>
                    <a class="dropdown-item" href="#" data-semester="retake">Retake</a>
                      <a class="dropdown-item" href="#" id="viewRegisteredCourses">View Registered Courses</a>
                </div>
            </li>
            
            <!-- Tasks -->
            <li class="nav-item dropdown">
                <a class="nav-link ml-5" href="#" id="navbarDropdownTasks" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Tasks
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownTasks">
                    <a class="dropdown-item" href="#">Take Exams</a>
                    <a class="dropdown-item" href="#">Take Test</a>
                    <a class="dropdown-item" href="#" id="viewIDCard">View ID Card</a>
                </div>
            </li>
            
            <!-- Result -->
            <li class="nav-item dropdown"> 
                <a class="nav-link ml-5" href="#" id="navbarDropdownResults" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Result
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownResults">
                    <a class="dropdown-item" href="#">CA Result</a>
                    <a class="dropdown-item" href="#">Exam Result</a>
                </div>
            </li>
                      
            <!-- Logout button -->
            <li class="nav-item"> 
                <a class="nav-link ml-5" href="#" id="logout">Logout</a>
            </li>
        </ul>
    </div>
</nav>

<!-- Courses Selection Page -->
<div class="container mt-5">
    <div id="courseSelectionContainer" class="courseSelectionContainer d-none">
        <h3 id="semesterTitle">Select Courses for <span id="semesterName"></span></h3>
        <form id="courseSelectionForm">
            <div id="courseCheckboxes">
                <!-- Course checkboxes will be dynamically added here -->
            </div>
            <button type="submit" class="btn btn-primary mt-3">Register Selected Courses</button>
        </form>
    </div>
</div>

<!-- Modal for Registered Courses -->
<div class="modal fade" id="registeredCoursesModal" tabindex="-1" role="dialog" aria-labelledby="registeredCoursesModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="registeredCoursesModalLabel">Registered Courses</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="registeredCoursesList">
                <!-- Registered Courses List will be populated here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="downloadCourses">Download Registered Courses</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

  </nav>
  <section><!-- Student Profile -->
    <div class="container mt-4">
        <div class="card profile-card">
            <div class="card-header text-center">
                CompuTech Nexus Academy
            </div>
            <div class="card-body text-center">
                <div class="profile-picture-container">
                    <img src="" id="profile-pic" class="profile-picture" alt="Profile Picture">
                </div>
                <h5 class="card-title mt-3" id="studentName"></h5>
                <p class="card-text">Student ID: <span id="studentID"></span></p>
                <p class="card-text">Class: <span id="class"></span></p>
                <p class="card-text">Guardian Phone: <span id="guardianPhone"></span></p>
                <div class="signature"></div>
            </div>
        </div>
    </div>
</section><!-- End of Student Profile -->

  <!-- Modal for ID Card -->
  <div class="modal fade" id="idCardModal" tabindex="-1" role="dialog" aria-labelledby="idCardModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
      <div class="modal-content">
        <div class="modal-header">
         
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- Front of ID Card -->
          <div class="id-card">
            <div class="modal-header-content">
              <img src="logo.jpg" alt="School Logo" class="id-card-logo">
              <h5 class="modal-title">CompuTech Nexus Academy</h5>
              <h6 class="modal-title">Student ID Card</h6>
            </div>
            <img src="" id="modalProfilePic" style="max-width: 150px; max-height: 150px;" alt="Profile Picture">
        <h5 class="card-title mt-3" id="modalStudentName"></h5>
        <p class="card-text">Student ID: <span id="modalStudentID"></span></p>
        <p class="card-text">Class: <span id="modalClass"></span></p>
        <p class="card-text">Guardian Phone: <span id="modalGuardianPhone"></span></p>
        <div class="signature">
            <p>Signature: ________________________</p>
        </div>
          </div>
          
          <!-- Back of ID Card -->
          <div class="id-card-back">
            <h5>Usage Policy</h5>
            <p>This ID card is issued to the bearer as a means of identification at CompuTech Nexus Academy. It remains the property of the academy and must be surrendered upon request. It is non-transferable and is to be used solely by the person to whom it is issued. For security reasons, the card must be signed immediately upon receipt. If found, please return it to:</p>
            <p>CompuTech Nexus Academy, 32 Km, Maiduguri Road, Gano 2 Primary School, Dawakin Kudu L.G.A</p>
            <p>Contact Numbers: 08030909793, 08033643018, 09123754300</p>
            <p>Email:<a href="mailto:1440shamsusabo@gmail.com">1440shamsusabo@gmail.com</a></p>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="window.print()">Print</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div><br><br><br>
  <footer class="bg-light text-dark pt-4">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h5>Contact</h5>
                <p>32Km, Maiduguri Road,<br> Gano 2 Primary School, <br> Dawakin Kudu L.G.A <br>
                    Kano, Nigeria<br>
                    Phone: 08030909793<br>
                    Email: shamsusabo@gmail.com</p>
            </div>
            <div class="col-md-4">
                <h5>Useful Links</h5>
                <ul class="list-unstyled">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="apply.html">Apply</a></li>
                    <li><a href="login.html">Login</a></li>
                    <li><a href="app_payment.html">Payments</a></li>
                    
                    <!-- Add your other navbar links here -->
                </ul>
            </div>
            <div class="col-md-4">
                <h5>Courses</h5>
                <ul class="list-unstyled">
                  <li><a href="#WD">Web Development</a></li>
                    <li><a href="#CA">Computer Application</a></li>
                </ul>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-6">
                <p>&copy; 2024 CompuTech Nexus Academy</p>
            </div>
            <div class="col-md-6 text-right">
                <a href="https://www.facebook.com/" target="_blank"><i class="fab fa-facebook-square mr-3"></i></a>
                <a href="https://twitter.com/" target="_blank"><i class="fab fa-twitter-square mr-3"></i></a>
                <a href="https://www.instagram.com/" target="_blank"><i class="fab fa-instagram-square mr-3"></i></a>
                <a href="https://web.whatsapp.com/" target="_blank"><i class="fab fa-whatsapp-square mr-3"></i></a>
            </div>
        </div>
    </div>
  </footer>
  <button onclick="topFunction()" id="myBtn" title="Go to top"><i class="fas fa-arrow-up"></i></button>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Bootstrap JS, Popper.js, and jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="student_dashboard.js"></script>
</body>
</html>