<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Dashboard</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
</head>
    <style>
    .modal-header-content {
      text-align: center;
      margin-bottom: 20px;
    }

    .modal-header-content img {
      max-width: 80px; /* Adjust logo width */
      display: block;
      margin: 0 auto;
    }

    .modal-title {
      margin-bottom: 0;
      text-align: center; /* Center align modal title */
    }

    .modal-footer {
      justify-content: center;
    }

    .signature {
      margin-top: 20px;
    }

    .profile-picture-container {
      max-width: 200px; /* Adjust width as needed */
      max-height: 300px; /* Adjust height as needed */
      margin: 0 auto; /* Center the container */
      overflow: hidden; /* Ensure the image doesn't overflow */
      border-radius: 10px; /* Rounded corners for the picture */
    }

    .profile-picture {
            width: 160px;
            height: 170px;
            border-radius: 50%;
            object-fit: cover;
        }
    .card {
      border-radius: 20px; /* Rounded corners for the card */
      overflow: hidden;
    }

    .profile-card {
      max-width: 550px; /* Increase the width for profile card */
      margin: 0 auto; /* Centered content */
      height: 400px;
    }

    .card-body {
      padding: 1.25rem; /* Padding inside the card body */
    }

    .card-title {
      font-weight: bold;
    }

    /* styles for ID card modal */
    .id-card {
      text-align: center;
      padding: 1.25rem;
      border: 2px solid #000; /* Border around the card */
      max-width: 300px; /* Portrait orientation */
      margin: 0 auto; /* Centered content */
      margin-bottom: 20px; /* Space below the card */
    }
    
    .id-card-back {
      /* Additional styles for back of ID card */
      text-align: center; /* Center content */
      padding: 1.25rem; /* Padding */
      border: 2px solid #000; /* Border around the card */
      max-width: 300px; /* Portrait orientation */
      margin: 0 auto; /* Centered content */
    }

    .id-card-logo {
      max-width: 80px;
      margin: 0 auto;
      display: block;
    }

    #profile-pic {
      max-width: 50px;
      max-height: 60px;
      border-radius: 45%;
    }

 body {
            background-color: white;
        }
       
        .modal-body-scroll {
    max-height: 400px; /* Set the maximum height */
    overflow-y: auto;  /* Enable vertical scrolling */
}

/* Fixed Circular Images */
.fixed-image, .circular-img {
    width: 55px;
    height: 60px;
    object-fit: contain;
    border-radius: 50%;
}

/* First Navbar - Contains images and text */
/* First Navbar - Contains images and text */
.first-navbar {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1030; /* Ensures it stays above other content */
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 10px;
    background-color: #f8f9fa; /* Light background */
}

/* Second Navbar - Contains menu items */
.second-navbar {
    position: fixed;
    top: 60px; /* Positioned right below the first navbar */
    width: 100%;
    z-index: 1029; /* Slightly lower than the first navbar */
    display: flex;
    padding: 24px 14px;
    background-color: #f8f9fa; /* Light background */
    height: 50px;
    justify-content: space-between;
}
.second-navbar .navbar-nav .nav-item {
    margin-right: 20px; /* Adds space between each nav item */
}

.second-navbar .navbar-nav .nav-item:last-child {
    margin-right: 0; /* Removes margin from the last item for alignment */
}

/* Center align menu toggler on mobile */
.navbar-toggler {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
}

/* Menu link styles */
.navbar-nav .nav-item .nav-link {
    color: #343a40 !important; /* Dark text color */
    line-height: 1.8;
    transition: color 0.3s ease, background-color 0.3s ease;
}

/* Hover effect for link */
.navbar-nav .nav-item .nav-link:hover {
    color: #e4e8ec !important; /* Slightly darker on hover */
    background-color: rgba(255, 254, 254, 0.5) !important;
}
/* Mobile view - Keep background light */
@media (max-width: 992px) {
    .navbar-collapse {
        background-color: #f8f9fa; /* Light background for mobile menu */
    }

    .navbar-nav .nav-item .nav-link {
        color: #343a40 !important; /* Dark text color */
    }

    .navbar-toggler-icon {
        filter: invert(1); /* Dark toggler icon for light background */
    }
}

/* Large screen styles */
@media (min-width: 992px) {
    .navbar-collapse {
        justify-content: center;
    }

    /* Hide the toggler on large screens */
    .navbar-toggler {
        display: none;
    }
}
/* Cancel button styles */
.cancel-btn {
    display: none; /* Hidden by default */
    background: transparent;
    border: none;
    font-size: 1.5rem; /* Adjust size as needed */
    color: #dbe2e8; /* Color of the icon */
    position: absolute;
    top: 10px; /* Adjust top position */
    right: 10px; /* Adjust right position */
    cursor: pointer;
}
/*to hide the menu icon*/
.hidden {
    display: none !important; /* Forcefully hide the element */
}

/* Show the cancel button in mobile view */
@media (max-width: 992px) {
    .cancel-btn {
        display: block; /* Show when navbar is toggled */
    }
}
/* Hide the menu icon by default when navbar is shown */
.navbar-toggler-icon.hidden {
    display: none;
}
.hidden {
    display: none !important; /* Forcefully hide the element */
}

   /* Additional spacing for page content */
body {
    padding-top: 120px; /* Ensures content doesn’t overlap with fixed navbars */
}


button {
            padding: 10px 15px;
            background-color: #202122;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #a6a6a9;
        }
    .footer {
  background: #f8f9fa;
  color: #343a40;
  padding: 10px;
  text-align: center;
  display: flex;
  justify-content: center; /* Center horizontally */
  align-items: center;     /* Center vertically */
  flex-direction: column;  /* Stack items vertically */
}

.footer .row {
  width: 100%; /* Ensure row takes up the full width */
  display: flex;
  justify-content: center; /* Center horizontally */
  align-items: center;     /* Center vertically if necessary */
  margin: 0;
}

.footer .col {
  padding: 0;
  text-align: center; /* Ensure content in columns is centered */
}

.footer p {
  margin: 0;
}

.footer a {
  color: #007bff;
  text-decoration: none;
}

.footer i {
  font-size: 24px;
}
    #myBtn {
  display: none;
  position: fixed;
  bottom: 15px;
  right: 30px;
  z-index: 99;
  border: none;
  outline: none;
  background-color: rgb(210, 210, 233);
  color: white;
  cursor: pointer;
  padding: 15px;
  border-radius: 4px;
}

#myBtn:hover {
  background-color: #555;
}
    /* Mobile adjustments */
@media (max-width: 576px) {
    /* Center modal header content on smaller screens */
    .modal-header-content {
        text-align: center;
        margin-bottom: 10px;
    }

    .modal-header-content img {
        max-width: 60px; /* Smaller logo size for mobile */
    }

    .modal-title {
        font-size: 18px; /* Adjust title size for readability */
    }

    .modal-footer {
        justify-content: center;
        padding: 10px;
    }

    .signature {
        margin-top: 15px;
    }

    .profile-picture-container {
        max-width: 150px;
        max-height: 200px;
    }

    .profile-picture {
        width: 120px;
        height: 120px;
    }

    .card {
        border-radius: 15px;
    }

    .profile-card {
        max-width: 100%;
        height: auto;
    }

    .card-body {
        padding: 1rem;
    }

    .card-title {
        font-size: 16px;
    }

    .id-card, .id-card-back {
        max-width: 100%;
        padding: 1rem;
    }

    #profile-pic {
        max-width: 45px;
        max-height: 50px;
    }

    .modal-body-scroll {
        max-height: 250px;
    }

    .fixed-image, .circular-img {
        width: 40px;
        height: 40px;
    }

    /* Navbar adjustments */
    .first-navbar {
        top: 0;
        padding: 0 8px;
    }

    .second-navbar {
        top: 50px;
        padding: 15px 10px;
        height: 40px;
    }

    .navbar-toggler {
        left: 50%;
        transform: translateX(-50%);
    }

    .cancel-btn {
        top: 8px;
        right: 8px;
        font-size: 1.25rem;
    }

    /* Footer adjustments */
    .footer {
        padding: 8px;
        font-size: 14px;
    }

    .footer .row {
        flex-direction: column;
    }

    .footer i {
        font-size: 20px;
    }

    #myBtn {
        bottom: 10px;
        right: 20px;
        padding: 10px;
    }

    button {
        padding: 8px 12px;
        font-size: 14px;
    }
}

  </style>
</head>
<body>
    <!-- First Navbar (Images and Admin Dashboard Text) -->
<nav class="navbar navbar-light bg-white text-dark fixed-top first-navbar">
  <!-- Left image (Education Cap) -->
  <img src="educap.jfif" alt="Education Cap" class="circular-img fixed-left-img">
  
  <!-- Navbar brand (Admin Dashboard text) centered -->
  <span class="navbar-brand mx-auto text-dark">Staff&nbsp;&nbsp;Dashboard</span>
  
  <!-- Right image logo -->
  <img src="logo.jpg" alt="Professor" class="circular-img fixed-right-img">
</nav>

<!-- Second Navbar (Navbar Items) -->
<nav class="navbar navbar-expand-lg navbar-dark bg-light text-dark second-navbar">
  <!-- Toggler for mobile view -->
  <button class="navbar-toggler" type="button" onclick="toggleNavbar()">
      <span class="navbar-toggler-icon"></span> <!-- Menu Icon -->
  </button>
  <button class="cancel-btn" style="display:none;" onclick="toggleNavbar()">×</button> <!-- Cancel Icon -->
  

  <!-- Collapsible navbar items -->
  <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
      <ul class="navbar-nav">
          <li class="nav-item">
              <a class="nav-link text-danger" href="staff_dashboard.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-danger" id="resultManagementLink"  href="resultmanagement.html">Results Management</a>
          </li>
         
          <!-- Download ID Card -->
          <li class="nav-item">
            <a class="nav-link ml-5" href="#" data-toggle="modal" data-target="#idCardModal">Staff ID Card</a>
        </li>
          
          <!-- Logout -->
          <li class="nav-item">
              <a class="nav-link ml-5" href="/logout" id="logout">Logout</a>
          </li>
      </ul>
  </div>
</nav>

    <!-- Staff Profile Section -->
    <div class="containery profile-card-container">
        <div class="card profile-card text-center">
            <div class="card-header">
                Imam Hafsin Model International School
            </div>
            <div class="card-body">
                <img id="teacher-profile-picture" src="default-profile.png" alt="Profile Picture" class="profile-picture mb-3">
                <h5 class="card-title" id="teacher-name">Welcome</h5>
                <p><strong>Email:</strong> <span id="teacher-email"></span></p>
                <p><strong>Staff ID:</strong> <span id="teacher-staff-id"></span></p>
                <p><strong>Qualification:</strong> <span id="teacher-qualification"></span></p>
                <p><strong>Role:</strong> <span id="teacher-role"></span></p>
            </div>
        </div>
    </div>
    <!-- End of Staff Profile Section -->
<br><br>
 <!-- Modal for ID Card -->
 <div class="modal fade" id="idCardModal" tabindex="-1" role="dialog" aria-labelledby="idCardModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title">Staff ID Card</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <!-- Front of ID Card -->
              <div class="id-card">
                  <div class="modal-header-content">
                      <img src="logo.jpg" alt="School Logo" class="id-card-logo">
                      <h6 class="modal-title">Imam Hafsin Model International School <br>622, Yakasai Street, Tal'udu G/Kaya<br>Gwale L.G.A, Kano State, Nigeria. </h6>
                      <h5 class="modal-title" style="text-decoration: underline;">Staff ID Card</h5>
                  </div>
                  <img id="modal-teacher-profile-picture" src="default-profile.png" alt="Profile Picture" class="profile-picture mb-3">
                  <h5 class="card-title" id="modal-teacher-name">Welcome</h5>
                  <p><strong>Staff ID:</strong> <span id="modal-teacher-staff-id"></span></p>
                  <p><strong>Qualification:</strong> <span id="modal-teacher-qualification"></span></p>
                  <p><strong>Role:</strong> <span id="modal-teacher-role"></span></p>
                  <div class="signature">
                      <p>Signature: ________________________</p>
                  </div>
              </div>
              <!-- Back of ID Card -->
              <div class="id-card-back">
                  <h5>Usage Policy</h5>
                  <p>This ID card is issued to staff members for identification purposes at Imam Hafsin Model International School. It remains the property of the school and must be surrendered upon request. The card is non-transferable and should only be used by the authorized individual. For security reasons, it must be signed upon receipt. If found, please return it to:</p>
                  <p>Imam Hafsin Model International School<br>622, Yakasai Street, Tal'udu G/Kaya<br>Gwale L.G.A, Kano State, Nigeria.</p>
                  <p>Contact:</p>
                  <p>08030999939939399</p>
                  <p><a href="mailto:1440shamsusabo@gmail.com">imamhafsin@gmail.com</a></p>
              </div>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-primary" onclick="window.print()">Print</button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
      </div>
  </div>
</div>
 <!-- Footer -->
 <div class="footer bg-light mt-5">
  <div class="row text-center py-3">
    <div class="col-md-4">
      <p><strong>Imam Hafsin Model International School</strong></p>
      <p>622, Yakasai Street, Tal'udu G/Kaya</p>
      <p>Email: imamhafsin@gmail.com</p>
      <p>Phone: 08030999939939399</p>
    </div>
    <div class="col-md-4">
      <a href="https://www.facebook.com/prof.johndoe" target="_blank" class="d-block mb-2">
        <i class="fab fa-facebook"></i> Facebook
      </a>
      <a href="https://www.instagram.com/prof.johndoe" target="_blank" class="d-block mb-2">
        <i class="fab fa-instagram"></i> Instagram
      </a>
      <a href="https://twitter.com/prof_johndoe" target="_blank" class="d-block mb-2">
        <i class="fab fa-twitter"></i> Twitter
      </a>
      <a href="https://wa.me/1234567890" target="_blank" class="d-block mb-2">
        <i class="fab fa-whatsapp"></i> WhatsApp
      </a>
    </div>
    <div class="col-md-4">
      <p>&copy; IHMIS 2024</p>
      <p>All rights reserved.</p>
    </div>
  </div>
</div>
<!-- Back to top button -->
<button onclick="topFunction()" id="myBtn" title="Go to top"><i class="fas fa-arrow-up"></i></button>

  <!-- Bootstrap JS, Popper.js, and jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
      function checkSessionStatus() {
    fetch('/checkSession')
        .then(response => response.json())
        .then(data => {
            if (!data.loggedin) {
                alert("Session has expired. Please log in again.");
                window.location.href = '/login'; // Redirect to the login page
            }
        })
        .catch(error => console.error('Error checking session status:', error));
}

// Check the session status every 5 minutes (300000 milliseconds)
setInterval(checkSessionStatus, 300000);

      function toggleNavbar() {
    const navbarNav = document.getElementById("navbarNav");
    const cancelButton = document.querySelector(".cancel-btn");
    const menuIcon = document.querySelector(".navbar-toggler-icon");

    const isOpen = navbarNav.classList.toggle("show");
    cancelButton.style.display = isOpen ? "block" : "none"; // Toggle cancel button
    menuIcon.classList.toggle("hidden", isOpen); // Show/hide menu icon
}

        // Function to fetch teacher details from the server
    async function fetchTeacherDetails() {
        try {
            const response = await fetch('/api/teacher-details'); // Your endpoint to fetch teacher details
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }

            const teacher = await response.json();

            // Populate the HTML with teacher details
            document.getElementById('teacher-name').innerText = `Welcome, ${teacher.name}`;
            document.getElementById('teacher-email').innerText = teacher.email;
            document.getElementById('teacher-staff-id').innerText = teacher.staff_id;
            document.getElementById('teacher-qualification').innerText = teacher.qualification;
            document.getElementById('teacher-role').innerText = teacher.role;
            document.getElementById('teacher-profile-picture').src = teacher.profile_picture || 'default-profile.png';
             // Populate the ID card modal with teacher details
             document.getElementById('modal-teacher-name').innerText = teacher.name;
                document.getElementById('modal-teacher-staff-id').innerText = teacher.staff_id;
                document.getElementById('modal-teacher-qualification').innerText = teacher.qualification;
                document.getElementById('modal-teacher-role').innerText = teacher.role;
                document.getElementById('modal-teacher-profile-picture').src = teacher.profile_picture || 'default-profile.png';
                
        } catch (error) {
            console.error('Error fetching teacher details:', error);
        }
    }

    // Call the function to fetch teacher details when the page loads
    window.onload = fetchTeacherDetails;

    function logout() {
    // Redirect to the logout route, which will clear the session
    window.location.href = '/logout'; 
}


    // Back to top button functionality
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("myBtn").style.display = "block";
        } else {
            document.getElementById("myBtn").style.display = "none";
        }
    }

    function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
 
    
function preventBackNavigation() {
    window.history.pushState(null, document.title, window.location.href);
    window.addEventListener('popstate', function(event) {
        window.history.pushState(null, document.title, window.location.href);
    });
}

// Call this function on the staff_dashboard page
preventBackNavigation();

 </script>
</body>
</html>